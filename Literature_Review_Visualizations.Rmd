---
title: "Literature_Review_visualizations"
author: "Libbie"
date: "2025-04-15"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
library(tidyverse)
```

```{r}
#install.packages("tidygeocoder")
library(tidygeocoder)

```

```{r}
library(readr)
data <- read_csv("C:\\Users\\User\\Desktop\\Literature Review\\coral_study_locations_for_plotting.csv")
class(data)
# Should say: "spec_tbl_df" "tbl_df" "tbl" "data.frame"

```

```{r}
glimpse(data)
view(data)
```
```{r}
data_coords <- data %>%
  geocode(Location, method = "osm", lat = latitude, long = longitude)

```
```{r}
head(data_coords)

```

```{r}
data_coords_clean <- data_coords %>%
  filter(!is.na(latitude) & !is.na(longitude))

```

```{r}
nrow(data_coords)         # Total number of rows before cleaning
nrow(data_coords_clean)   # Total number after removing NAs

```
```{r}
View(data_coords_clean)

```


```{r}
#install.packages("maps")
library(maps)

world_map <- map_data("world")

ggplot() +
  geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
               fill = "gray95", color = "gray70") +
  geom_point(data = data_coords_clean, aes(x = longitude, y = latitude),
             color = "red", size = 2) +
  coord_fixed(1.3) +
  theme_minimal() +
  labs(
    title = "Mapped Coral Spawning Study Locations",
    x = "Longitude", y = "Latitude"
  )

```

```{r}
library(maps)

world_map <- map_data("world")

ggplot() +
  geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
               fill = "gray95", color = "gray70") +
  geom_point(data = data_coords_clean, 
             aes(x = longitude, y = latitude, color = "Coral Spawning Studies from Current Databases"), 
             size = 2) +
  scale_color_manual(name = NULL, values = "red") +
  coord_fixed(1.3) +
  theme_minimal() +
  theme(legend.position = "bottom") +  # <- Move legend to the bottom
  labs(
    title = "Mapped Coral Spawning Study Locations",
    x = "Longitude", y = "Latitude"
  )

```

# NEED TO FIX INLAND POINT IN WA

```{r}
# View all geocoded coordinates
View(data_coords_clean)

```

```{r}
data_coords_clean %>%
  filter(longitude > 110, longitude < 125, latitude < -15, latitude > -35)
# isolating WA point
```

```{r}
data_coords_clean$latitude[which(data_coords_clean$Location == "Western Australia")] <- -22.0
data_coords_clean$longitude[which(data_coords_clean$Location == "Western Australia")] <- 113.9

```

```{r}
library(maps)

world_map <- map_data("world")

ggplot() +
  geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
               fill = "gray95", color = "gray70") +
  geom_point(data = data_coords_clean, 
             aes(x = longitude, y = latitude, color = "Coral Spawning Studies from Current Databases"), 
             size = 2) +
  scale_color_manual(name = NULL, values = "red") +
  coord_fixed(1.3) +
  theme_minimal() +
  theme(legend.position = "bottom") +  # <- Move legend to the bottom
  labs(
    title = "Mapped Coral Spawning Study Locations",
    x = "Longitude", y = "Latitude"
  )
```
# Now we are going to add shaded areas that need more spawning data collection and attention 


```{r}
# Load required libraries
library(maps)       # For the world base map
library(ggplot2)    # For plotting
library(ggforce)    # For drawing ellipses
library(tibble)     # For tibble data format

# Load world map data
world_map <- map_data("world")

# Define underrepresented regions as large blue ellipses
gap_regions <- tibble::tibble(
  region = c(
    "Northern Indian Ocean", 
    "East Africa", 
    "Southeast Indian Ocean",
    "Central Pacific", 
    "High Latitude N. Pacific", 
    "Tropical Atlantic",
    "West Pacific", 
    "Caribbean", 
    "Southeast Asia"
  ),
  x0 = c(65, 45, 110, -170, 135, -38, 155, -75, 128),  # center longitudes
  y0 = c(10, -15, -12, 4, 30, -17, -10, 18, 5),        # center latitudes
  a = c(12, 10, 8, 15, 8, 6, 7, 15, 18),               # horizontal radii (width)
  b = c(6, 16, 6, 6, 4, 5, 5, 7, 12),                  # vertical radii (height)
  angle = 0                                            # no rotation
)

# Create the map
ggplot() +
  # Base world map polygons
  geom_polygon(data = world_map, aes(x = long, y = lat, group = group),
               fill = "gray95", color = "gray70") +
  
  # Red points for existing coral spawning studies
  geom_point(data = data_coords_clean, 
             aes(x = longitude, y = latitude, color = "Coral Spawning Studies from Current Databases"),
             size = 2) +
  
  # Large blue shaded ovals for under-monitored regions (with legend label)
  geom_ellipse(data = gap_regions,
               aes(x0 = x0, y0 = y0, a = a, b = b, angle = angle, fill = "Monitoring Gap"),
               alpha = 0.2, color = NA) +
  
  # Add legend entries for red and blue features
  scale_color_manual(name = NULL, values = "red") +
  scale_fill_manual(name = NULL, values = c("Monitoring Gap" = "blue")) +
  
  # Keep map proportions clean
  coord_fixed(1.3) +
  theme_minimal() +
  theme(legend.position = "bottom") +
  
  # Title and axis labels
  labs(
    title = "Coral Spawning Study Locations & Monitoring Gaps",
    x = "Longitude",
    y = "Latitude"
  )


```








